# Dev overrides: 
# - Build locally from Dockerfile instead of pulling GHCR image
# - Bind-mount local ./app/ code to /app/app/ for live/hot-reload style edits
# 
# Usage:
#   docker compose -f docker-compose.yaml -f docker-compose.dev.yaml up -d --build
# 
# After edits to ./app/*.py â†’ just restart the container:
#   docker compose -f docker-compose.yaml -f docker-compose.dev.yaml restart app

services:
  app:
    build:
      context: .     # Builds from your local Dockerfile
      target: prod   # Explicitly build the lean runtime stage

    volumes:
      - ./app:/app/app:ro   # Mount host code for instant code changes
      - cache:/app/cache    # Persistent cache volume (inherited from base compose file)

